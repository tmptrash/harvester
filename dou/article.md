# –Ø–∫ —è —Å—Ç–≤–æ—Ä–∏–≤ –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É –¥–ª—è –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö —Å DOM

–¶–µ –º–∞–ª–µ–Ω—å–∫–∞ —ñ—Å—Ç–æ—Ä—ñ—è –ø—Ä–æ –Ω–∞–ø–∏—Å–∞–Ω–Ω—è –Ω–µ–≤–µ–ª–∏—á–∫–æ—ó npm –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ –¥–ª—è –ø–∞—Ä—Å—ñ–Ω–≥—É —ñ –ø–æ—à—É–∫—É –¥–∞–Ω–∏—Ö –≤ –¥–∏–Ω–∞–º—ñ—á–Ω–æ–º—É DOM –¥–µ—Ä–µ–≤—ñ. –°—Ç–≤–æ—Ä–µ–Ω–æ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –Ω–µ—â–æ–¥–∞–≤–Ω—å–æ–≥–æ –æ—Ñ–ª–∞–π–Ω –≤–∏—Å—Ç—É–ø—É –Ω–∞ [fwdays](https://fwdays.com/en/event/react-fwdays-2025) –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü—ñ—ó.

## –í—Å—Ç—É–ø

–°—É—á–∞—Å–Ω–∏–π –≤–µ–± ‚Äî —Ö–∞–æ—Ç–∏—á–Ω–∏–π. –Ü —Ö–æ—á–∞ HTML –≤–∏–≥–ª—è–¥–∞—î —è–∫ –¥–µ—Ä–µ–≤–æ, —É —Ä–µ–∞–ª—å–Ω–∏—Ö —É–º–æ–≤–∞—Ö –≤—ñ–Ω –Ω–∞–≥–∞–¥—É—î **–∑–∞—Ä–æ—Å—Ç—ñ —Ç—Ä–æ–ø—ñ—á–Ω–æ–≥–æ –ª—ñ—Å—É**: –≥–ª–∏–±–æ–∫–∏–π, –Ω–µ–ø–æ—Å–ª—ñ–¥–æ–≤–Ω–∏–π —ñ –Ω–µ–ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–∏–π. –ö–æ–∂–µ–Ω —Ä–æ–∑—Ä–æ–±–Ω–∏–∫ –ø–∏—à–µ –∫–æ–¥ –ø–æ —Ä—ñ–∑–Ω–æ–º—É, –≤ —Å–≤–æ–º—É —Å—Ç–∏–ª—ñ —ñ –ø–æ —Å–≤–æ—ó—Ö –ø—Ä–∞–≤–∏–ª–∞—Ö. –¢–æ–º—É, –≤–µ–± —Å–∫—Ä–∞–ø—ñ–Ω–≥ —ñ–Ω–æ–¥—ñ –ø–æ—Ç—Ä–µ–±—É—î –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –∑—É—Å–∏–ª—å, —è–∫—â–æ –º–∏ —Ö–æ—á–µ–º–æ –æ—Ç—Ä–∏–º–∞—Ç–∏ –±–∞–∂–∞–Ω—ñ –¥–∞–Ω—ñ. –Ü —â–æ–± –º—ñ–Ω—ñ–º—ñ–∑—É–≤–∞—Ç–∏ —Ü—ñ –∑—É—Å–∏–ª–ª—è, –±—É–ª–∞ —Å—Ç–≤–æ—Ä–µ–Ω–∞ –ø—Ä–æ—Å—Ç–∞ npm –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞, —è–∫–∞ —Ç—Ä—ñ—à–∫–∏ —Å–ø—Ä–æ—â—É—é —Ü–µ–π –ø—Ä–æ—Ü–µ—Å.

–ö–æ–ª–∏ –º–µ–Ω—ñ –±—É–ª–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏—Ç—è–≥–∞—Ç–∏ —â–æ—Å—å –∑ —Ä—ñ–∑–Ω–∏—Ö —Å–∞–π—Ç—ñ–≤, —è —Ä–æ–±–∏–≤ —Ü–µ "—Ä—É–∫–∞–º–∏". –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ —Ç—Ä–µ–±–∞ –∑—ñ–±—Ä–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ —Ç–æ–≤–∞—Ä–∏ –Ω–∞ —Ä–æ–∑–µ—Ç—Ü—ñ –Ω–∞–º –±—É–ª–∏ –± –ø–æ—Ç—Ä—ñ–±–Ω—ñ —Ç–∞–∫—ñ –ø–æ–ª—è:
* –Ω–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É
* —Ü—ñ–Ω–∞
* —Ñ–æ—Ç–æ
* SKU
* —â–æ—Å—å –¥–æ–¥–∞—Ç–∫–æ–≤–µ

–î—É–º–∞—é –≤–∏ –Ω–µ —Ä–∞–∑ –±–∞—á–∏–ª–∏ —è–∫ –≤–∏–≥–ª—è–¥–∞—î —Ü–µ–π —Å–∞–π—Ç. –û—Å—å –ø—Ä–∏–∫–ª–∞–¥ –æ–¥–Ω—ñ—î—ó —ñ–∑ —Å—Ç–æ—Ä—ñ–Ω–æ–∫ –∑ —Ä–∞–Ω–¥–æ–º–Ω–∏–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏:

![image](https://github.com/tmptrash/harvester/blob/main/dou/slides/Screenshot%202025-11-30%20at%2014.47.09-cut.png?raw=true)

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏—Ç—è–≥–Ω—É—Ç–∏, —è–∫—ñ–π—Å—å —Ç–æ–≤–∞—Ä, –≤—Å–µ –≤–∏–≥–ª—è–¥–∞—î –∫—Ä–∞—Å–∏–≤–æ, –¥–æ–∫–∏ –Ω–µ –∑–∞–≥–ª—è–Ω–µ—à —É DOM —ñ –Ω–µ –ø–æ—á–∏–Ω–∞—î—à —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ query –¥–æ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤...

## –ü—Ä–æ–±–ª–µ–º–∞: –¥–∏–Ω–∞–º—ñ—á–Ω–∏–π DOM –ø–æ—Å—Ç—ñ–π–Ω–æ –ª–∞–º–∞—î –≤–∞—à—ñ —Å–µ–ª–µ–∫—Ç–æ—Ä–∏

–î–∞–≤–∞–π—Ç–µ —Å–ø—Ä–æ–±—É—î–º–æ –∞–±—Å—Ç—Ä–∞–≥—É–≤–∞—Ç–∏—Å—å —ñ –≤–∏—Ä—ñ—à–∏—Ç–∏ –ø—Ä–æ–±–ª–µ–º—É –±—ñ–ª—å—à –≥–ª–æ–±–∞–ª—å–Ω–æ. –û—Å—å —Ç–∏–ø–æ–≤–∞ HTML-–∫–∞—Ä—Ç–∫–∞ —Ç–æ–≤–∞—Ä—É –≤ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω—ñ (–∑–ª—ñ–≤–∞ —ñ —Å–ø—Ä–∞–≤–∞ –æ–¥–∏–Ω –π —Ç–æ–π —Å–∞–º–∏–π —Ç–æ–≤–∞—Ä –∑–∞ —Ä—ñ–∑–Ω–∏—Ö —É–º–æ–≤):

![image](https://github.com/tmptrash/harvester/blob/main/dou/slides/Screenshot%202025-11-30%20at%2014.48.07-cut.png?raw=true)

–°—Ç—Ä—É–∫—Ç—É—Ä–∏ —Ä—ñ–∑–Ω—ñ. –¢–µ–≥–∏ —Ä—ñ–∑–Ω—ñ. –ü–æ—Ä—è–¥–æ–∫ —Ä—ñ–∑–Ω–∏–π. –ê–ª–µ —Ç–æ–≤–∞—Ä —Ç–æ–π —Å–∞–º–∏–π. –ß–æ–º—É —Ç–∞–∫? –¢–æ–º—É —â–æ, —Å—É—á–∞—Å–Ω—ñ —Å–∞–π—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —Ä—ñ–∑–Ω—ñ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏, —è–∫—ñ –≥–µ–Ω–µ—Ä—É—é—Ç—å HTML –¥–∏–Ω–∞–º—ñ—á–Ω–æ –≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ —Ü–∏—Ö —Å–∞–º–∏—Ö —É–º–æ–≤. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∞–±–æ –∑–≤–∏—á–∞–π–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –º–æ–∂–µ –≤–∏–≥–ª—è–¥–∞—Ç–∏ –ø–æ —Ä–∞–∑–Ω–æ–º—É. –Ü —Ü–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ...

–î–ª—è –ø—Ä–∏–∫–ª–∞–¥—É –≤–∏—â–µ, –≤–∞—à –∫–æ–¥, –¥–ª—è –ø–æ—à—É–∫—É –ø–æ—Ç—Ä—ñ–±–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —ñ–º–æ–≤—ñ—Ä–Ω–æ, –≤–∏–≥–ª—è–¥–∞—î –æ—Å—å —Ç–∞–∫:

![image](https://github.com/tmptrash/harvester/blob/main/dou/slides/Screenshot%202025-11-30%20at%2014.48.44-cut.png?raw=true)

–Ü –≤—Å–µ —Ü–µ –ø–µ—Ä–µ—Å—Ç–∞—î –ø—Ä–∞—Ü—é–≤–∞—Ç–∏, —è–∫—â–æ:
* –ø—Ä–æ–≥—Ä–∞–º—ñ—Å—Ç –∑–∞–º—ñ–Ω–∏–≤ `<h1>` –Ω–∞ `<div>`
* –∑‚Äô—è–≤–∏–≤—Å—è –Ω–æ–≤–∏–π `<span>`
* –ø–µ—Ä–µ—Å—Ç–∞–≤–∏–ª–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ –º—ñ—Å—Ü—è–º–∏
* –¥–æ–¥–∞–ª–∏—Å—å –Ω–æ–≤—ñ –µ–ª–µ–º–µ–Ω—Ç–∏
* –∑–º—ñ–Ω–∏—Ç–∏ –∞–±–æ –∑–∞–±—Ä–∞–ª–∏ `id`
* —ñ —Ç.–ø.

–ü—Ä–æ–±–ª–µ–º–∞ —Ç—É—Ç —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∞: –¥–ª—è –ø–æ—à—É–∫—É –¥–∞–Ω–∏—Ö **–º–∏ –æ–ø–∏—Å—É—î–º–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—É DOM, –∞ –Ω–µ —Å–∞–º—ñ –¥–∞–Ω—ñ.**

## –Ü–¥–µ—è: –æ–ø–∏—Å—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ, –∞ –Ω–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É DOM

–Ø —Å—Ñ–æ—Ä–º—É–ª—é–≤–∞–≤ –≥–æ–ª–æ–≤–Ω–µ –ø–∏—Ç–∞–Ω–Ω—è: **‚Äú—è–∫ –¥—ñ—Å—Ç–∞—Ç–∏ –¥–∞–Ω—ñ, –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ –æ–ø–∏—Ä–∞—é—á–∏—Å—å –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É DOM?‚Äù**. –¶–µ –ø—Ä–∏–≤–µ–ª–æ –º–µ–Ω–µ –¥–æ —ñ–¥–µ—ó —Ä–æ–∑—Ä–æ–±–∏—Ç–∏ **DSL** ‚Äî –º–∞–ª–µ–Ω—å–∫–æ—ó –º–æ–≤–∏, —è–∫–∞ –æ–ø–∏—Å—É—î —Å–∞–º–µ –¥–∞–Ω—ñ, –∞ –Ω–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É DOM. –¢–∞–∫ –∑‚Äô—è–≤–∏–≤—Å—è –ø—Ä–æ—î–∫—Ç **Harvester**.

## –©–æ —Ç–∞–∫–µ Harvester?

**Harvester** ‚Äî —Ü–µ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –¥–ª—è –æ–ø–∏—Å—É –¥–∞–Ω–∏—Ö —É –≤–∏–≥–ª—è–¥—ñ –ø—Ä–æ—Å—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ tree-like —à–∞–±–ª–æ–Ω—É, —è–∫–∏–π:
* –ª–µ–≥–∫–æ –ø–∏—Å–∞—Ç–∏
* –ª–µ–≥–∫–æ —á–∏—Ç–∞—Ç–∏
* —Å–ª–∞–±–æ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ DOM
* —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω–∏–π –¥–æ –∑–º—ñ–Ω—ñ –≤–µ—Ä—Å—Ç–∫–∏
* –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –¥–∞–Ω—ñ –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –Ω–µ–º–∞ –∑–∞ —â–æ –∑–∞—á–µ–ø–∏—Ç–∏—Å—å (–Ω–µ–º–∞ id, –∫–ª–∞—Å—ñ–≤ —ñ —Ç.–ø.)

–î–∞–≤–∞–π—Ç–µ –≥–ª—è–Ω–µ–º–æ –Ω–∞ –∫–æ–¥ –¥–ª—è –ø–æ—à—É–∫—É –¥–∞–Ω–∏—Ö –∑ –ø—Ä–∏–∫–ª–∞–¥—É, —è–∫–∏–π –º–∏ —Ä–æ–∑–≥–ª—è–¥–∞–ª–∏ –≤–∏—â–µ:

![image](https://github.com/tmptrash/harvester/blob/main/dou/slides/Screenshot%202025-11-30%20at%2014.48.55-cut.png?raw=true)

–°–ø—Ä–∞–≤–∞-–∑–≤–µ—Ä—Ö—É –≤–∏ –º–æ–∂–µ—Ç–µ –±–∞—á–∏—Ç–∏ –ø—Ä–∏–∫–ª–∞–¥ —à–∞–±–ª–æ–Ω—É, —è–∫–∏–π –æ–ø–∏—Å—É—î –ø—Ä–æ–¥—É–∫—Ç, –π–æ–≥–æ —Ü—ñ–Ω—É, –∫–∞—Ä—Ç–∏–Ω–∫—É —Ç–∞ SKU (—É–Ω—ñ–∫–∞–ª—å–Ω–∏–π –Ω–æ–º–µ—Ä) –¥–ª—è –æ–±–æ—Ö –≤–∏–ø–∞–¥–∫—ñ–≤. –î–∞–≤–∞–π—Ç–µ —Ç—Ä—ñ—à–∫–∏ –∑—É–ø–∏–Ω–∏–º–æ—Å—å –Ω–∞ –π–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç—ñ. –ó–∞–≥–∞–ª–æ–º - —Ü–µ –ø—Ä–æ—Å—Ç–∞ –±–∞–≥–∞—Ç–æ—Ä—è–¥–∫–æ–≤–∞ JS —Å—Ç—Ä—ñ—á–∫–∞, —è–∫–∞ –æ–ø–∏—Å—É—î –¥–µ—Ä–µ–≤–æ –¥–∞–Ω–∏—Ö. –ö–æ–∂–Ω–∞ –ª—ñ–Ω—ñ—è - —Ü–µ —Ç–µ–≥ –≤ DOM –¥–µ—Ä–µ–≤—ñ, –¥–µ –º–∏ –≤–∫–∞–∑—É—î–º–æ –¥–µ—Ç–∞–ª—ñ –ø–æ—à—É–∫—É —Ç–µ–∫—Å—Ç—É –≤ —Ü—å–æ–º—É —Ç–µ–∑—ñ. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–µ –æ–±–æ–≤'—è–∑–∫–æ–≤–æ –º–∞—î –±—É—Ç–∏ —Å—Ö–æ–∂–∞ –Ω–∞ —Ñ–∞–∫—Ç–∏—á–Ω–∏–π DOM. –í–æ–Ω–∞ –º–∞—î –±—É—Ç–∏ —è–∫ –º—ñ–Ω—ñ–º—É–º –±–ª–∏–∑—å–∫–∞ –¥–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ—ó. –ö–æ–∂–Ω–∞ —Å—Ç—Ä—ñ—á–∫–∞ –º–∞—î –º—ñ—Å—Ç–∏—Ç–∏ —ñ–º'—è —Ç–µ–≥—É, –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω—É –∑–º—ñ–Ω–Ω—É –¥–ª—è —Ç–µ–∫—Å—Ç—É —ñ –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω—É –∑–º—ñ–Ω–Ω—É –¥–ª—è –∞—Ç—Ä–∏–±—É—Ç—É. –û—Å—å —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–∫–ª–∞–¥—ñ–≤ —Å—Ç—Ä–æ–∫ –¥–ª—è —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è —à–∞–±–ª–æ–Ω—ñ–≤ –ø–æ—à—É–∫—É –¥–∞–Ω–∏—Ö:

* `*` ‚Äî –æ–∑–Ω–∞—á–∞—î "—à—É–∫–∞—Ç–∏ –±—É–¥—å-—è–∫–∏–π —Ç–µ–≥"
* `div` - –æ–∑–Ω–∞—á–∞—î "—à—É–∫–∞—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–µ —ñ–º'—è —Ç–µ–≥—É" (–º–æ–∂–µ –±—É—Ç–∏ `span`, `head`, —â–æ –∑–∞–≤–≥–æ–¥–Ω–æ)
* `span{price:float}` - –æ–∑–Ω–∞—á–∞—î "—à—É–∫–∞—Ç–∏ `span` –∑ —á–∏—Å–ª–æ–º —Ç–∏–ø—É `float` –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ" —ñ –ø–æ–∫–ª–∞—Å—Ç–∏ —á–∏—Å–ª–æ –≤ –∑–º—ñ–Ω–Ω—É `price`
* `img[img=src]` - –æ–∑–Ω–∞—á–∞—î "—à—É–∫–∞—Ç–∏ —Ç–µ–≥ `img` –∑ –∞—Ç—Ä–∏–±—É—Ç–æ–º `src`" —ñ –ø–æ–∫–ª–∞—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –≤ –∑–º—ñ–Ω–Ω—É `img`
* `div{sku:with:SKU}` - –æ–∑–Ω–∞—á–∞—î "—à—É–∫–∞—Ç–∏ —Ç–µ–≥ `div` —Å —Ç–µ–∫—Å—Ç–æ–º, —è–∫–∏–π –º–∞—î –ø—ñ–¥—Ç–µ–∫—Å—Ç 'SKU'" —ñ –ø–æ–∫–ª–∞—Å—Ç–∏ –≤ –∑–º—ñ–Ω–Ω—É `sku`
* `p{text}[attr=ref]` - –æ–∑–Ω–∞—á–∞—î "—à—É–∫–∞—Ç–∏ —Ç–µ–≥ `p` —Å –±—É–¥—å —è–∫–∏–º —Ç–µ–∫—Å—Ç–æ–º —ñ –∞—Ç—Ä–∏–±—É—Ç–æ–º `ref`" —ñ –ø–æ–∫–ª–∞—Å—Ç–∏ —Ç–µ–∫—Å—Ç –≤ –∑–º—ñ–Ω–Ω—É `text`, –∞ –∞—Ç—Ä–∏–±—É—Ç –≤ –∑–º—ñ–Ω–Ω—É `attr`

# üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç, —è–∫–∏–π –ø–æ–≤–µ—Ä—Ç–∞—î Harvester

```js
{
  product: "Product Name",
  price: 99.99,
  img: "https://...jpg",
  sku: "SKU: 4278654"
}
```

–¢–∞–∫–∏–π —Å–∞–º–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ –æ—Ç—Ä–∏–º–∞–Ω–æ **–∑ –±—É–¥—å-—è–∫–æ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏**, –¥–æ–∫–∏ –¥–∞–Ω—ñ –ø—Ä–∏—Å—É—Ç–Ω—ñ.

---

# üì¶ –Ø–∫ –ø—Ä–∞—Ü—é—î Harvester –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ

–£ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—ó —è –ø–æ–∫–∞–∑—É–≤–∞–≤ –ø—Ä–æ–±–ª–µ–º–∏ –∫–ª–∞—Å–∏—á–Ω–æ–≥–æ DOM-–ø–∞—Ä—Å–∏–Ω–≥—É:

Harvester –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **fuzzy tree matching**:

1. –†–æ–∑–±–∏—Ä–∞—î DSL —É –¥–µ—Ä–µ–≤–æ —à–∞–±–ª–æ–Ω—É
2. –ü—Ä–æ—Ö–æ–¥–∏—Ç—å DOM
3. –®—É–∫–∞—î –Ω–∞–π–±–ª–∏–∂—á—É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å
4. –í–∏—á–∏—Ç—É—î —Ç–µ–∫—Å—Ç/—á–∏—Å–ª–∞/–∞—Ç—Ä–∏–±—É—Ç–∏ –∑–≥—ñ–¥–Ω–æ –∑ —Ç–∏–ø–∞–º–∏
5. –ü–æ–≤–µ—Ä—Ç–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### –ü—Ä–æ–±–ª–µ–º–∏, —è–∫—ñ –¥–æ–≤–µ–ª–æ—Å—è –≤–∏—Ä—ñ—à–∏—Ç–∏:

* —Ä–µ–∫—É—Ä—Å—ñ—ó
* –≥–ª–∏–±–æ–∫–∏–π DOM
* —Å—Ö–æ–∂—ñ —Ç–µ–≥–∏
* —Ä—ñ–∑–Ω—ñ –ø–æ—Ä—è–¥–∫–∏ children
* —á–∞—Å—Ç–∫–æ–≤—ñ –∑–±—ñ–≥–∏
* –µ–∫—Å–ø–æ–Ω–µ–Ω—Ü—ñ–π–Ω–µ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è –∫–æ–º–±—ñ–Ω–∞—Ü—ñ–π

–£ DSL –º–∏ –º–æ–∂–µ–º–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:

* —Ç–∏–ø–∏ –ø–æ–ª—ñ–≤ (`float`, `int`, `with`, `str`)
* –∞—Ç—Ä–∏–±—É—Ç–∏ (`[img=src]`)
* wildcard-—Ç–µ–≥–∏ (`*`)
* –≤–∫–ª–∞–¥–µ–Ω—ñ—Å—Ç—å —á–µ—Ä–µ–∑ –ø—Ä–æ–±—ñ–ª–∏

---

# üßµ –ü—Ä–∏–∫–ª–∞–¥ —à–∞–±–ª–æ–Ω—É —É –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—ó

---

# üöÄ –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

–£ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó —î –ø—Ä–æ—Å—Ç–∏–π –ø—Ä–∏–∫–ª–∞–¥:

```js
import { harvest } from "harvester";

const template = `
div
  *{product:with:Product}
  span{price:float}
  img[img=src]
`;

const data = harvest(html, template);

console.log(data);
```

–†–ï–ü–û–ó–ò–¢–û–†–Ü–ô:
üëâ [https://github.com/tmptrash/harvester](https://github.com/tmptrash/harvester)

---

# üß† –£ —á–æ–º—É —Å–∏–ª–∞ –ø—ñ–¥—Ö–æ–¥—É

### ‚úî –ù–µ–º–∞—î –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ —Å–µ–ª–µ–∫—Ç–æ—Ä—ñ–≤

DOM –º–æ–∂–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏—Å—è ‚Äî —ñ —Ü–µ *–Ω–µ –ª–∞–º–∞—î* –∫–æ–¥.

### ‚úî –ú—ñ–Ω—ñ–º—É–º –∫–æ–¥—É

DSL –æ–ø–∏—Å—É—î –ª–∏—à–µ —Ç–µ, —â–æ —Ç—Ä–µ–±–∞ –≤–∏—Ç—è–≥—Ç–∏.

### ‚úî –û–¥–∏–Ω —à–∞–±–ª–æ–Ω ‚Äî –±–∞–≥–∞—Ç–æ —Å–∞–π—Ç—ñ–≤

–û–¥–∏–Ω DSL –º–æ–∂–Ω–∞ –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –¥–æ —Ä—ñ–∑–Ω–∏—Ö —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω—ñ–≤.

### ‚úî –õ–µ–≥–∫–æ —á–∏—Ç–∞—Ç–∏

–®–∞–±–ª–æ–Ω –≤–∏–≥–ª—è–¥–∞—î —è–∫ JSON, CSS —ñ XPath –æ–¥–Ω–æ—á–∞—Å–Ω–æ.

### ‚úî –í—ñ–¥–æ–∫—Ä–µ–º–ª–µ–Ω–æ –≤—ñ–¥ UI

–ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–∞—Ü—é—î –æ–¥–Ω–∞–∫–æ–≤–æ –Ω–∞ Node.js —Ç–∞ —É –±—Ä–∞—É–∑–µ—Ä—ñ.

---

# üß¨ –ü—Ä–∏–∫–ª–∞–¥–∏ —Ä–µ–∞–ª—å–Ω–∏—Ö –ø—Ä–æ–±–ª–µ–º DOM, —è–∫—ñ —Ä–æ–∑–≤‚Äô—è–∑—É—î Harvester

* —Ä—ñ–∑–Ω–∏–π –ø–æ—Ä—è–¥–æ–∫ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
* —Ä—ñ–∑–Ω—ñ —Ç–µ–≥–∏ (`h1` ‚Üí `div`, `span` ‚Üí `p`)
* —Ä—ñ–∑–Ω—ñ –º–æ–¥—É–ª—ñ
* –∑–∞–π–≤—ñ —Ä–µ–∫–ª–∞–º–Ω—ñ –±–ª–æ–∫–∏
* –¥–æ–¥–∞—Ç–∫–æ–≤—ñ `<span>`
* `<img>` —É `<picture>`

Harvester –Ω–µ –ø–æ–∫–ª–∞–¥–∞—î—Ç—å—Å—è –Ω–∞ —Ç–∞–∫—ñ –¥–µ—Ç–∞–ª—ñ.

---

# üìå –í–∏—Å–Ω–æ–≤–∫–∏

–°—Ç–≤–æ—Ä–µ–Ω–Ω—è Harvester DSL —Å—Ç–∞–ª–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–¥—é –Ω–∞ —Ä–µ–∞–ª—å–Ω—É –ø—Ä–æ–±–ª–µ–º—É:

> **HTML –∑–∞–Ω–∞–¥—Ç–æ –Ω–µ—Å—Ç–∞–±—ñ–ª—å–Ω–∏–π, —â–æ–± –¥–æ–≤—ñ—Ä—è—Ç–∏ –∂–æ—Ä—Å—Ç–∫–∏–º —Å–µ–ª–µ–∫—Ç–æ—Ä–∞–º.**

DSL-–¥–µ–∫–ª–∞—Ä–∞—Ü—ñ—ó –¥–æ–∑–≤–æ–ª—è—é—Ç—å:

* –æ–ø–∏—Å—É–≤–∞—Ç–∏ *–¥–∞–Ω—ñ*, –∞ –Ω–µ *—Å—Ç—Ä—É–∫—Ç—É—Ä—É*
* –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ —Ö–∞–æ—Ç–∏—á–Ω–∏–º–∏ DOM
* –∑–º–µ–Ω—à–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–æ–¥—É
* –∞–¥–∞–ø—Ç—É–≤–∞—Ç–∏—Å—è –¥–æ –±—É–¥—å-—è–∫–æ—ó –≤–µ—Ä—Å—Ç–∫–∏
* –±—É–¥—É–≤–∞—Ç–∏ —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω—ñ –≤–∏—Ç—è–≥—É–≤–∞—á—ñ –¥–∞–Ω–∏—Ö (scrapers)

---

# üîó –†–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π

üëâ **[https://github.com/tmptrash/harvester](https://github.com/tmptrash/harvester)**

–£ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó —î:

* Parser
* Matcher
* DSL-—à–∞–±–ª–æ–Ω–∏
* Playground
* –ü—Ä–∏–∫–ª–∞–¥–∏
* –¢–µ—Å—Ç–∏

---

# üí¨ –Ø–∫—â–æ —Ö–æ—á–µ—à ‚Äî –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏:

* –¥–æ–¥–∞—Ç–∏ README –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—é
* —Å—Ç–≤–æ—Ä–∏—Ç–∏ –¥–µ–º–æ –Ω–∞ Codesandbox
* –ø–µ—Ä–µ–ø–∏—Å–∞—Ç–∏ DSL-—Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—é
* –æ—Ñ–æ—Ä–º–∏—Ç–∏ —Ä–µ–ª—ñ–∑
* –ø—ñ–¥–≥–æ—Ç—É–≤–∞—Ç–∏ —Å—Ç–∞—Ç—Ç—é –ø—ñ–¥ Medium —á–∏ Habr

–ì–æ—Ç–æ–≤–∏–π –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏!



üìå –†–ï–ü–û–ó–ò–¢–û–†–Ü–ô:
üëâ [https://github.com/tmptrash/harvester](https://github.com/tmptrash/harvester)
